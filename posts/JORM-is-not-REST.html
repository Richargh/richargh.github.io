<!DOCTYPE html>
<html lang="en">
<head>
    <meta content="width=device-width, initial-scale=1" name="viewport" />
    <meta property="og:site_name" content="Knowledge Continuum"/>
    <meta property="og:description" content="The Richardson Maturity Model is a great model for explaining the basics of building an http Api.
Unfortunately the indexing of its layers (0, 1, 2, 3) suggests that reaching Level 1 is already REST.
That is a problem because it closes people to the decoupling and integration merits that actual REST has and leaves them with an API that can only be described as JORM (Json Object-Relational Mapping): Their API is not designed to solve a problem but to get data from A to B, so the problem can be solved at B.">
    <meta property="article:author" content="https://richargh.de/about/"><meta property="og:title" content="JORM (Json Object-Relational Mapping) is not REST">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://richargh.de/posts/JORM-is-not-REST"><title>Richard's Blog</title>

    <link rel="canonical" href="https://richargh.de/posts/JORM-is-not-REST"/>
    <link rel="apple-touch-icon" href="/assets/img/profile.jpg">
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css"/>

    <link rel="icon" href="/assets/img/favicon.ico" type="image/png" sizes="16x16"/>
    <link href="/assets/css/style.css" rel="stylesheet" media="all" class="default"/>

    <!--[if IE]>
        <link href="/assets/css/ie-target.css" rel="stylesheet" type="text/css"/>
    <![endif]-->
    <!--<link href="/assets/css/prism.css" rel="stylesheet" />-->
    <link rel="alternate" type="application/rss+xml" href="https://richargh.de/feed.xml">
</head>

<body>
    <div class="container">                    
        <div class = "box"><header>
    <div class="dashboard disable-select">
        <div class="site-heading profile-board-col">
           <h4 class="medium"><a href="/">Richard's Blog</a></h4>
        </div>

        <div class="userboard profile-board-col">
            <div class="username">
                <p class="title-sans">Richard Gro√ü</p>
            </div>
            <div class="userdesc">
                <p class="title-sans">IT Archaeologist</p>
            </div>
        </div>
    </div>
    <div class="avatar disable-select">
        <a class="avatar-link" href="/">
            <img src="/assets/img/profile.jpg" class="avatar-img" alt="avatar"/>
        </a>
    </div>

    <!-- Navbar -->
    <div class="main-site-subheader menu disable-select">
        <div class="talks">
            <a style="text-decoration: none;" href="/talks">
                <!-- from https://www.reshot.com/free-svg-icons/item/speaker-ZQA938GVWS/ -->
                <svg class="icon-talks" width="18" height="19" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
                    <path d="M15 25.983a1 1 0 0 1-.406-.086L4.218 21.29H1a1 1 0 0 1-1-1v-8.614a1 1 0 0 1 1-1h3.218L14.594 6.07A1 1 0 0 1 16 6.983v18a1 1 0 0 1-1 1zM2 19.29h2.43c.14 0 .278.029.405.085L14 23.445V8.52l-9.165 4.07a1.002 1.002 0 0 1-.405.085H2v6.614zM23.698 28a1 1 0 0 1-.39-1.92A10.942 10.942 0 0 0 30 15.982c0-4.379-2.599-8.33-6.62-10.065a1 1 0 0 1-.522-1.314.997.997 0 0 1 1.314-.522A12.95 12.95 0 0 1 32 15.982c0 5.22-3.106 9.906-7.913 11.939a1 1 0 0 1-.39.08z"/>
                    <path d="M22.751 24.051a1 1 0 0 1-.47-1.883A6.993 6.993 0 0 0 26 15.983a6.992 6.992 0 0 0-3.719-6.185 1 1 0 1 1 .939-1.766 8.988 8.988 0 0 1 4.78 7.95 8.988 8.988 0 0 1-4.78 7.952.993.993 0 0 1-.469.117z"/>
                    <path d="M19 20.733a1 1 0 0 1 0-2c1.517 0 2.75-1.233 2.75-2.75s-1.233-2.75-2.75-2.75a1 1 0 0 1 0-2c2.62 0 4.75 2.13 4.75 4.75s-2.13 4.75-4.75 4.75z"/>
                </svg>
                <p class="home-p">Talks</p>
            </a>
        </div>
        <div class="published">
            <a style="text-decoration: none;" href="/published">
                <!-- from https://www.reshot.com/free-svg-icons/item/paper-plane-D72FP5NHXZ/ -->
                <svg class="icon-published" width="25" height="25" viewBox="0 0 2048 2048" xmlns="http://www.w3.org/2000/svg">
                    <g id="Layer_x0020_1"><g id="_559822392"><path id="_559822728" class="fil0" d="M1657.53 872.581 348.07 521.715l493.348 993.204 338.593-451.457-.1-.074a31.858 31.858 0 0 1 16.456-11.467l461.159-179.34zM296.27 441.664l1470.41 393.994c10.174 2.183 19.089 9.275 23.141 19.697 6.406 16.47-1.755 35.018-18.225 41.423l-11.599-29.824 11.5 29.75-545.971 212.322-362.47 483.291a31.844 31.844 0 0 1-12.97 11.81c-15.828 7.86-35.034 1.403-42.895-14.424l28.66-14.236-28.626 14.125L260.4 488.722c-4.181-7.128-5.62-15.863-3.312-24.475 4.573-17.07 22.121-27.201 39.191-22.628l-.01.04z"/><path
                            id="_559822560" class="fil0"
                            d="M305.626 445.908c-14.705-9.733-34.518-5.705-44.251 9-9.734 14.705-5.705 34.518 9 44.251l917.512 610.055c14.705 9.734 34.518 5.705 44.251-9 9.733-14.705 5.705-34.518-9-44.251L305.626 445.908z"/><path
                            id="_559822608" class="fil0"
                            d="M1237.39 1080.09c-1.38-17.604-16.772-30.756-34.376-29.375-17.604 1.38-30.756 16.772-29.375 34.376l28.922 361.603-132.165-169.905c-10.838-13.944-30.931-16.462-44.875-5.625-13.944 10.838-16.462 30.931-5.625 44.875l197.058 253.327c6.326 8.797 16.966 14.166 28.553 13.24 17.617-1.407 30.755-16.833 29.347-34.449l-.026.003-37.437-468.07z"/></g></g>
                    <path style="fill:none" d="M0 0h2048v2048H0z"/>
                </svg>
                <p class="published-p">Published</p>
            </a>
        </div>
        <div class="built">
            <a style="text-decoration: none;" href="/built">
                <!-- from https://www.reshot.com/free-svg-icons/item/tool-UACF35PGN9/ -->
                <svg class="icon-built" width="18" height="19" viewBox="0 0 14 23" xmlns="http://www.w3.org/2000/svg" >
                    <path d="M10 23V13a7.551 7.551 0 0 0 4-6.682A6.992 6.992 0 0 0 10 0v6.318a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V0a6.992 6.992 0 0 0-4 6.318A7.551 7.551 0 0 0 4 13v10h2v-8h2v8z"/>
                </svg>
                <p class="built-p">Built</p>
            </a>
        </div>
        <div class="home">
            <a style="text-decoration: none;" href="/about">
                <svg class="icon-home" width="18" height="19" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M20.9777 21.6138V19.6138C20.9777 18.553 20.5563 17.5356 19.8061 16.7854C19.056 16.0353 18.0386 15.6138 16.9777 15.6138H8.97768C7.91682 15.6138 6.8994 16.0353 6.14926 16.7854C5.39911 17.5356 4.97768 18.553 4.97768 19.6138V21.6138"  stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M12.9777 11.6138C15.1868 11.6138 16.9777 9.82298 16.9777 7.61385C16.9777 5.40471 15.1868 3.61385 12.9777 3.61385C10.7685 3.61385 8.97768 5.40471 8.97768 7.61385C8.97768 9.82298 10.7685 11.6138 12.9777 11.6138Z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <p class="home-p">About</p>  
            </a>
        </div>
        <div class="categories">
            <a style="text-decoration: none;" href="/tags">
            <svg class="icon-category" width="18" height="19" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M4 9.5H20"  stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M4 15.5H20"  stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M10 3.5L8 21.5"  stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M16 3.5L14 21.5"  stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <p class="categories-p">Tags</p>
            </a>
        </div>
        <div class="rss">
            <a style="text-decoration: none;" href="/feed.xml">
                <svg class="icon-rss" width="18" height="19" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M4 11.5C6.38695 11.5 8.67613 12.4482 10.364 14.136C12.0518 15.8239 13 18.1131 13 20.5"  stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M4 4.5C8.24346 4.5 12.3131 6.18571 15.3137 9.18629C18.3143 12.1869 20 16.2565 20 20.5"  stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M5 20.5C5.55228 20.5 6 20.0523 6 19.5C6 18.9477 5.55228 18.5 5 18.5C4.44772 18.5 4 18.9477 4 19.5C4 20.0523 4.44772 20.5 5 20.5Z"  stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            <p class="rss-p">RSS</p>
            </a>
        </div>
    </div>
    <div class="searchbar search-container">
        <i class="fa fa-search" aria-hidden="true"></i>
        <label for="search-input"></label>
        <input type="text" oninput="changeResultContainerDisp(this.value)" id="search-input" autocomplete="off" placeholder="Search the Blog..."/>
        <ul id="results-container"></ul>
    </div>
    <script src="/assets/js/simple-jekyll-search.min.js"></script>
    <script>
        function changeResultContainerDisp(val) {
            if (val) {
                document.getElementById("results-container").style.display = "block";
                document.getElementById("search-input").addEventListener('blur', function() {
                    document.addEventListener('click', function(event) {
                        var isClickInside = document.getElementById("results-container").contains(event.target);
                        if (!isClickInside) {
                            document.getElementById("results-container").style.display = "none";
                        }
                    })
                })
            }  else {
                document.getElementById("results-container").style.display = "none";
            }
        }
        var sjs = SimpleJekyllSearch({
                    searchInput: document.getElementById('search-input'),
                    resultsContainer: document.getElementById('results-container'),
                    json: '/search.json',
                    searchResultTemplate: '<li class="search_res" style="list-style: none;"><a href="https://richargh.de{url}" style="text-decoration: none; color: #555555;"><p style="font-size: 1.0rem; font-family: "Inter !important"; font-weight: 600;">{title}</p></a></li>',
                    noResultsText: 'No results found',
                    fuzzy: false,
                    limit: 4
                    })
    </script><div class="main-site-subheader disable-select" id="scroll-head" onclick="window.location.assign('/');">
        <div class="back-icon">
            <svg class="ripple" xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24">
                <path d="M0 0h24v24H0z" fill="none"/>
                <path d="M21 11H6.83l3.58-3.59L9 6l-6 6 6 6 1.41-1.41L6.83 13H21z"/>
            </svg>
        </div>
        <p class="back-p">Home</p>
    </div></header><main>
                <h1>JORM (Json Object-Relational Mapping) is not REST</h1><!-- Parse internal links, external links, transclusions etc and manipuate the content to reflect it accordingly --><ul class="tags"><li><a href="/dates/#20-August-2024" class="tag">August-20-2024</a></li>
    <!-- Loop through page categories and print them in tags --><li><a href="/tags/#rest" class="tag">rest</a></li><li><a href="/tags/#jorm" class="tag">jorm</a></li><li><a href="/tags/#api" class="tag">api</a></li></ul><div class="content"><div class="paragraph">
<p>The <a href="https://martinfowler.com/articles/richardsonMaturityModel.html">Richardson Maturity Model</a> is a great model for explaining the basics of building an http Api.
Unfortunately the indexing of its layers (0, 1, 2, 3) suggests that reaching Level 1 is already REST.
That is a problem because it closes people to the decoupling and integration merits that actual REST has and leaves them with an API that can only be described as <strong>JORM</strong> (Json Object-Relational Mapping): Their API is not designed to solve a problem but to get data from A to B, so the problem can be solved at B.</p>
</div>
<div class="paragraph">
<p>For Service B to solve the problem it needs to make decisions based on state.
That means we have to transfer a lot of state and the resulting json needs a huge schema that needs to stay in sync.
It also means that Service B has to interpret that data in the same way that Service A would, which means code duplication between different services and often different teams, which leads to coupled releases and coupled teams.
This form of coupling is inherent with RPC (remote procedure call)-style Apis and it is something that <strong>REST was designed to solve</strong>.</p>
</div>
<div class="paragraph">
<p>With this in mind I present the updated model, <em>Richard&#8217;s Maturity Model</em> (sorry for the name, couldn&#8217;t resist):</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/assets/img/posts/jorm-is-not-rest/richards-maturity-model.drawio.svg" alt="Richards Maturity Model">
</div>
</div>
<div class="paragraph">
<p>When you think REST, think Hypermedia.
The inventor of REST, Roy Fielding, described the architectural style quite well in his <a href="https://ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm">dissertation in 2000</a>, and explained the point again in 2008 (<a href="https://roy.gbiv.com/untangled/2008/rest-apis-must-be-hypertext-driven">REST APIs must be hypertext-driven</a>).</p>
</div>
<div class="sect1">
<h2 id="an-example"><a class="anchor" href="#an-example"></a><a class="link" href="#an-example">An example</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>To make this more transparent, let&#8217;s see how JORM and REST differ when we model a bank Api for viewing your account balance and transferring money.</p>
</div>
<div class="sect2">
<h3 id="jorm-style"><a class="anchor" href="#jorm-style"></a><a class="link" href="#jorm-style">JORM-Style</a></h3>
<div class="listingblock">
<div class="title">GET <a href="https://cool-bank.com/api/accounts/1234" class="bare">https://cool-bank.com/api/accounts/1234</a> (JORM-Style)</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aa-11"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"ownerId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b2-d2"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mf">490.00</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EUR"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"transactions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aa-11-11"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b2-d2"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"target"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c3-pd"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">10.00</span><span class="p">,</span><span class="w">
      </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EUR"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-08-20T01:23:45.678Z"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>It&#8217;s possible the Api is too simplistic but it&#8217;s a good place to start discussing things because this Api is missing some important things:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Where can we find further information? Where can we lookup the source and target of the transaction?</p>
</li>
<li>
<p>What actions are we allowed to take? Can we transfer more money? Can we close the account?</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The first question is usually addressed by something like <a href="https://apiblueprint.org/">Api Blueprint</a> or <a href="https://www.openapis.org/">OpenApi</a> which provides documentation for a human to sift through, guess and finally try if <code>GET /api/users/b2-d2</code> or <code>GET /api/owners/b2-d2</code> provides the right data for the source of the transaction.
It would be more convenient and less error-prone if the Account-Representation would tell us where the data is.
It would also make our Api evolvable.
The JORM approach leads to code where URLs are constructed via string concatenation, which means the URLs cannot change.
<a href="https://youtu.be/pspy1H6A3FM?t=1471">The URL is in fact the Api</a>.
If we instead not hard-code anything but just follow links that the server supplies then the server can change them at any time.</p>
</div>
<div class="paragraph">
<p>The second question cannot be addressed by JORM in a satisfying way because it always requires code duplication:
If we can and are allowed to withdraw money or close this account is dependent on multiple business rules.
A transaction is always possible unless the account is closed and unless the balance is below zero, but sometimes below zero is also ok but only up to a certain balance and so on.
A client would have to implement the same rules as the server and always keep them in sync lest it allows something that the server rejects.</p>
</div>
</div>
<div class="sect2">
<h3 id="rest-style"><a class="anchor" href="#rest-style"></a><a class="link" href="#rest-style">REST-Style</a></h3>
<div class="paragraph">
<p>REST solves these problems, because REST publishes all the possible actions from the current state.
A client can simply look at the list of actions and decide what to do next.
It does not need to know nor care why an action is allowed and thus less information needs to be shared and no duplication occurs:</p>
</div>
<div class="listingblock">
<div class="title">GET <a href="https://cool-bank.com/api/accounts/1234" class="bare">https://cool-bank.com/api/accounts/1234</a> (REST-Style, using <a href="https://github.com/JornWildt/Mason">Mason Format</a>)</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="nl">"ownerId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b2-d2"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mf">490.00</span><span class="p">,</span><span class="w">
  </span><span class="nl">"transactions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b2-d2"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"target"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c3-pd"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">10.00</span><span class="p">,</span><span class="w">
      </span><span class="nl">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-08-20T01:23:45.678Z"</span><span class="p">,</span><span class="w">

      </span><span class="nl">"@controls"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> <img src="./images/icons/callouts/1.png" alt="1">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://cool-bank.com/api/transactions/aa-11-11"</span><span class="w"> </span><span class="p">},</span><span class="w"> <img src="./images/icons/callouts/2.png" alt="2">
        </span><span class="nl">"coolb:view-source"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://cool-bank.com/api/transactions/b2-d2"</span><span class="w"> </span><span class="p">},</span><span class="w"> <img src="./images/icons/callouts/3.png" alt="3">
        </span><span class="nl">"coolb:view-target"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://cool-bank.com/api/transactions/c3-pd"</span><span class="w"> </span><span class="p">}</span><span class="w"> <img src="./images/icons/callouts/3.png" alt="3">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"@controls"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> <img src="./images/icons/callouts/1.png" alt="1">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://cool-bank.com/api/accounts/aa-11"</span><span class="w"> </span><span class="p">},</span><span class="w"> <img src="./images/icons/callouts/2.png" alt="2">
    </span><span class="nl">"coolb:close-account"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> <img src="./images/icons/callouts/4.png" alt="4">
      </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Close account"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://cool-bank.com/api/accounts/aa-11"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DELETE"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><img src="./images/icons/callouts/1.png" alt="1"></td>
<td>Additional hypermedia elements</td>
</tr>
<tr>
<td><img src="./images/icons/callouts/2.png" alt="2"></td>
<td>Link to self</td>
</tr>
<tr>
<td><img src="./images/icons/callouts/3.png" alt="3"></td>
<td>Link to source and target of the transaction</td>
</tr>
<tr>
<td><img src="./images/icons/callouts/4.png" alt="4"></td>
<td>The presence of this control means that we are allowed to close the account</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The response is missing the control for transferring money from a source to a target.
It is missing because the account owner is on vacation right now and does not want any transfers.
Or maybe it is missing because the account is closed.</p>
</div>
<div class="paragraph">
<p>We don&#8217;t actually need to know the business reason.
All our client sees is that the control is missing and therefore it cannot do it.
We don&#8217;t need to duplicate why something is not allowed and that means Service A is free to add or remove rules whenever it wants and the client, Service B, just needs to react to the <strong>presence of a control or its absence</strong>.</p>
</div>
<div class="paragraph">
<p>This is a supremely powerful concept and why the relatively new <strong>REST-style from the year 2000 is better at decoupling teams</strong> than the older RPC-Style Apis.
The cost is that the services require more protocol knowledge as Oliver Drotbohm <a href="https://odrotbohm.github.io/2016/04/benefits-of-hypermedia/">describes</a>.
If we adapt his drawing so it mentions JORM and REST we get:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/assets/img/posts/jorm-is-not-rest/benefits-of-rest.drawio.svg" alt="Benefits of REST">
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="smart-server-dumb-client"><a class="anchor" href="#smart-server-dumb-client"></a><a class="link" href="#smart-server-dumb-client">Smart Server, Dumb Client</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The client only having protocol knowledge gives us very clear benefits when we design a SPAs (Single-Page Applications) or need to support multiple devices such as iOS or Android.</p>
</div>
<div class="paragraph">
<p>A priori the client just needs to know the relevant relations, such as <code>"coolb:close-account"</code>.
The prefix <code>coolb</code> just means that it is a relation of the domain cool bank.
There are <a href="https://www.iana.org/assignments/link-relations/link-relations.xhtml">multiple standardized relations</a> that the client can use such as <code>next</code> or <code>prev</code> for pagination, <code>self</code> for the resource itself or <code>up</code> for the parent of a resource.</p>
</div>
<div class="paragraph">
<p>Once a client connects it just need to look for the existence of the <code>"coolb:close-account"</code> or the <code>"coolb:transfer-money"</code> to know it should display the buttons for closing or transferring money.
It ignores controls and optional fields that are unfamiliar or renders generic widgets based on the inputs the server requires.</p>
</div>
<div class="paragraph">
<p>All in all a lot less code is required for each client, because the server controls the interaction and you have a lot less errors to deal with because your iOS, Android or Web Apps cannot mismatch state.</p>
</div>
<div class="paragraph">
<p>If that seems far-fetched then please consider that you are viewing this post in your browser that allows you to react to arbitrary content without Mozilla, Google, Apple or Microsoft making adaptions in their client.</p>
</div>
<div class="paragraph">
<p>All your browser has is the protocol knowledge and that is enough.
If we design our Apis the same way the web is designed, then we get the same decoupling and scalability benefits that have powered the last 35 years (the web went public in 1991).
This is not surprising because Roy Fielding&#8217;s <a href="https://ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm">dissertation</a>, which defined the REST architectural style, was <strong>defining the core properties of HTTP</strong> so he knew which changes would benefit the protocol.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>What makes HTTP significantly different from RPC is that the requests are directed to resources using a generic interface with standard semantics that can be interpreted by intermediaries almost as well as by the machines that originate services.</p>
</div>
</blockquote>
<div class="attribution">
&#8212; Roy Fielding<br>
<cite>http://mamund.com/blog/archives/1107</cite>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="the-why-of-jorm"><a class="anchor" href="#the-why-of-jorm"></a><a class="link" href="#the-why-of-jorm">The Why of JORM</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>By now it should be clear why REST has clear benefits and why a small but vocal group (so called RESTafarians) take every opportunity to point out that most street-REST is not REST (<a href="https://www.youtube.com/watch?v=pspy1H6A3FM">REST: I don&#8217;t Think it Means What You Think it Does</a>).</p>
</div>
<div class="paragraph">
<p>It seems that this group has switched to using the name Hypermedia and Hypermedia Apis when talking about actual REST though.
<a href="https://martinfowler.com/bliki/SemanticDiffusion.html">Semantic diffusion</a> has taken its toll but since the REST ideas are so great and there is a dissertation describing them, it is worth bringing back the term REST.
For that to work we need a name for the alternative, and since that alternative is close enough to what many object-relational modelling tools give us, the name for the alternative is simply <strong>JORM</strong>.</p>
</div>
<div class="paragraph">
<p>The name encourages discussions.
As soon as you say, <code>"Should we build a JORM or a REST Api?"</code>, people get curious.
Curiosity alone might be enough to get people to research and spread great concepts like Hypermedia controls.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="should-everyone-adopt-rest"><a class="anchor" href="#should-everyone-adopt-rest"></a><a class="link" href="#should-everyone-adopt-rest">Should everyone adopt REST?</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now for the real question: should everyone adopt REST over JORM?</p>
</div>
<div class="sect2">
<h3 id="teams-that-own-their-clients"><a class="anchor" href="#teams-that-own-their-clients"></a><a class="link" href="#teams-that-own-their-clients">Teams that own their clients</a></h3>
<div class="paragraph">
<p>I think the sweet spot is when <strong>teams own their server (backend) as well as one or more clients (frontend: SPA, iOS or Android app)</strong>.
When they adopt REST, they can make their clients significantly dumber and by that not only save a lot of code but also iterate faster because their client is decoupled from their server.</p>
</div>
</div>
<div class="sect2">
<h3 id="teams-that-dont-own-their-clients"><a class="anchor" href="#teams-that-dont-own-their-clients"></a><a class="link" href="#teams-that-dont-own-their-clients">Teams that don&#8217;t own their clients</a></h3>
<div class="paragraph">
<p>It is less clear for company-wide or even global Apis if REST is a good choice for two reasons:</p>
</div>
<div class="paragraph">
<p>REST Apis make it very easy to solve problems because the server exposes all allowed actions in the form of Hypermedia Controls.
That however means you have to somehow figure out the <strong>problems your clients want to solve</strong>.
And then you have to take the time to implement solutions to your clients problems.</p>
</div>
<div class="paragraph">
<p>If you just expose a lot of state to their outside world, you don&#8217;t have to invest that time.
You do have to support that exposed state for a long time though, lest you lose your clients again, and that might take more time in the long run.</p>
</div>
<div class="paragraph">
<p>The second problem is that most clients are not used to the discoverable nature of REST Apis and demand stable URLs.
Even without documentation teams often try to retro-engineer the URLs and when they inevitably change, their clients break, which is what Hyrum&#8217;s Law describes:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>With a sufficient number of users of an API, it does not matter what you promise in the contract: all observable behaviors of your system will be depended on by somebody.</p>
</div>
</blockquote>
<div class="attribution">
&#8212; Hyrum Wright<br>
<cite>https://www.laws-of-software.com/laws/hyrum/</cite>
</div>
</div>
<div class="paragraph">
<p>That however means the Apis cannot evolve as intended which is why <em>solutions</em> like <a href="https://blog.ploeh.dk/2020/10/26/fit-urls/">FIT URLs</a> are proposed where all your URLs are signed and if you don&#8217;t have the right signature for the URL, you get a <code>404 Not Found</code>, even though the URL exists.
It forces people to follow links and it&#8217;s worth looking into, to keep your Api evolvable, but why do I have to force people to use REST?</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="irony"><a class="anchor" href="#irony"></a><a class="link" href="#irony">Irony</a></h2>
<div class="sectionbody">
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><strong>irony</strong>, noun</p>
</div>
<div class="paragraph">
<p>the use of words to express something other than and especially the opposite of the literal meaning [&#8230;&#8203;]</p>
</div>
</blockquote>
<div class="attribution">
&#8212; irony<br>
<cite>https://www.merriam-webster.com/dictionary/irony</cite>
</div>
</div>
<div class="paragraph">
<p>REST powers the internet and has allowed it to scale for the last 35 years.
It should be perfectly suitable for company or global Apis.
But after freeing ourselves from RPC-SOAP, we unintentionally conditioned ourselves to like RPC-JORM but call it REST.
Whenever we try to rethink our approach, we still go for RPC (<a href="https://grpc.io/">grpc</a>) and sometimes even drop designing solutions altogether to instead offload the problem solving to the client (<a href="https://graphql.org/">GraphQL</a>).
It&#8217;s not that these tools are bad, depending on the use case they might even be a good choice.
It is however strange to compare <strong>REST, an architectural style</strong>, with a tool, specifically one that implements the RPC architectural style (some "comparisons" are very good at explaining the difference <a href="https://www.youtube.com/watch?v=vgm_uGmspMI">"A no nonsense GraphQL and REST comparison" by Phil Sturgeon</a>).</p>
</div>
<div class="paragraph">
<p>Also ironic is that people "in the know" perceive building a REST Api as too difficult when really it&#8217;s very easy to get started.
I&#8217;d like to change this perception and have prepared a small <a href="/posts/Getting-Started-with-Hypermedia">Getting Started</a>.</p>
</div>
</div>
</div>
</div><!-- Add backlinks to the current page --></main><div id="copyright">
    <p id="copyright-notice">¬© Richard Gro√ü
         - with help from <a href="https://jekyllrb.com/">Jekyll</a>
        and <a href="https://github.com/raghuveerdotnet/simply-jekyll">Simply Jekyll Theme</a></p>
</div> </div>
        <button class="scroll-to-top" id="scroll-to-top"><i class="fa fa-chevron-up"></i></button>
    </div>
    <script type="text/javascript" async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script>
    <script>
        document.getElementById("scroll-to-top").addEventListener("click", function() {
            window.scrollTo({top: 0, left: 0, behavior: 'smooth'});
        });
    </script></body>
</html>
